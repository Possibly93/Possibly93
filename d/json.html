<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URLs to JSON Converter</title>
</head>
<body>
    <h1>URLs to JSON Converter</h1>
    <p>Enter the URLs below (one per line) or paste any text containing URLs and click the button to generate the JSON:</p>
    <textarea id="input" rows="10" cols="50"></textarea><br>
    <button onclick="generateJSON()">Generate JSON</button><br><br>
    <textarea id="output" rows="20" cols="50"></textarea><br><br>
    <button onclick="copyJSON()">Copy JSON</button>

    <script>
        function generateJSON() {
            let inputTextarea = document.getElementById('input');
            let text = inputTextarea.value.trim();
            let urls = extractURLs(text);

            let nestedJSON = {};
            urls.forEach(url => {
                let parts = url.split('/');
                let currentNode = nestedJSON;
                for (let i = 3; i < parts.length; i++) {
                    if (!currentNode[parts[i]]) {
                        currentNode[parts[i]] = {};
                    }
                    currentNode = currentNode[parts[i]];
                }
                currentNode[parts[parts.length - 1]] = 0;
            });

            // Convert the nested JSON to the desired format
            let finalJSON = convertToDesiredFormat(nestedJSON);

            let outputTextarea = document.getElementById('output');
            // Minify the JSON output
            outputTextarea.value = JSON.stringify(finalJSON);
        }

        function extractURLs(text) {
            // Regular expression to match URLs
            let regex = /https?:\/\/[^\s/$.?#].[^\s]*/gi;
            return text.match(regex) || [];
        }

        function convertToDesiredFormat(nestedJSON) {
            let finalJSON = {};
            for (let key in nestedJSON) {
                if (nestedJSON.hasOwnProperty(key)) {
                    let value = nestedJSON[key];
                    if (typeof value === 'object' && Object.keys(value).length === 1 && value.hasOwnProperty(key)) {
                        finalJSON[key] = 0;
                    } else {
                        finalJSON[key] = convertToDesiredFormat(nestedJSON[key]);
                    }
                }
            }
            return finalJSON;
        }

        function copyJSON() {
            let outputTextarea = document.getElementById('output');
            outputTextarea.select();
            document.execCommand('copy');
        }
    </script>
</body>
</html>
